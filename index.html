<!DOCTYPE html>
<html>
<head>
<title>2048</title>
<link rel="stylesheet" href="style.css">
</head>
<body>
<div class="grid-container">
<div class="grid-cell">2</div>
<div class="grid-cell"></div>
<div class="grid-cell"></div>
<div class="grid-cell"></div>
<div class="grid-cell"></div>
<div class="grid-cell"></div>
<div class="grid-cell"></div>
<div class="grid-cell"></div>
<div class="grid-cell"></div>
<div class="grid-cell"></div>
<div class="grid-cell"></div>
<div class="grid-cell"></div>
<div class="grid-cell"></div>
<div class="grid-cell"></div>
<div class="grid-cell"></div>
<div class="grid-cell"></div>
</div>
<script>
document.addEventListener('keydown', function(event) {
  switch (event.key) {
    case 'ArrowUp':
      moveTiles('up');
      break;
    case 'ArrowDown':
      moveTiles('down');
      break;
    case 'ArrowLeft':
      moveTiles('left');
      break;
    case 'ArrowRight':
      moveTiles('right');
      break;
  }
});

function moveTiles(direction) {
  console.log('Moving tiles ' + direction);
  const gridContainer = document.querySelector('.grid-container');
  const gridCells = Array.from(gridContainer.children);
  const gridSize = 4;

  let newGrid = [...gridCells];

  switch (direction) {
    case 'up':
      for (let i = 0; i < gridSize; i++) {
        for (let j = gridSize; j < gridSize * gridSize; j++) {
          if (j % gridSize === i) {
            let k = j;
            while (k - gridSize >= 0) {
              if (gridCells[k - gridSize].textContent === "") {
                gridCells[k - gridSize].textContent = gridCells[k].textContent;
                gridCells[k].textContent = "";
                break;
              } else if (gridCells[k - gridSize].textContent == gridCells[k].textContent) {
                gridCells[k - gridSize].textContent = parseInt(gridCells[k - gridSize].textContent) * 2;
                gridCells[k].textContent = "";
                
                break;
              }
              k -= gridSize;
            }
          }
        }
      }
      break;
    case 'down':
      for (let i = 0; i < gridSize; i++) {
        for (let j = gridSize * (gridSize - 1) - 1; j >= 0; j--) {
          if (j % gridSize === i) {
            let k = j;
            while (k + gridSize < gridSize * gridSize) {
              if (gridCells[k + gridSize].textContent === "") {
                gridCells[k + gridSize].textContent = gridCells[k].textContent;
                gridCells[k].textContent = "";
                break;
              } else if (gridCells[k + gridSize].textContent == gridCells[k].textContent) {
                gridCells[k + gridSize].textContent = parseInt(gridCells[k + gridSize].textContent) * 2;
                gridCells[k].textContent = "";
                break;
              }
              k += gridSize;
            }
          }
        }
      }
      break;
    case 'left':
      for (let i = 0; i < gridSize; i++) {
        for (let j = i * gridSize + gridSize - 1; j >= i * gridSize; j--) {
          let k = j;
          while (k - 1 >= i * gridSize) {
            if (gridCells[k - 1].textContent === "") {
              gridCells[k - 1].textContent = gridCells[k].textContent;
              gridCells[k].textContent = "";
              break;
            } else if (gridCells[k - 1].textContent == gridCells[k].textContent) {
              gridCells[k - 1].textContent = parseInt(gridCells[k - 1].textContent) * 2;
              gridCells[k].textContent = "";
              break;
            }
            k--;
          }
        }
      }
      break;
    case 'right':
      for (let i = 0; i < gridSize; i++) {
        for (let j = i * gridSize; j < i * gridSize + gridSize; j++) {
          let k = j;
          while (k + 1 < i * gridSize + gridSize) {
            if (gridCells[k + 1].textContent === "") {
              gridCells[k + 1].textContent = gridCells[k].textContent;
              gridCells[k].textContent = "";
              break;
            } else if (gridCells[k + 1].textContent == gridCells[k].textContent) {
              gridCells[k + 1].textContent = parseInt(gridCells[k + 1].textContent) * 2;
              gridCells[k].textContent = "";
              break;
            }
            k++;
          }
        }
      }
      break;
  }
}
</script>
</body>